---
layout: post
title: "Jekyll_Configuration"
subtitle: "12. Configuration"
date: 2020-09-17 21:13:13 -0400
background: '/img/posts/06.jpg'
category: [Jekyll]
tag: [Jekyll]
---

# Configuration

Jekyll gives you a lot of flexibility to customize how it builds your site. These options can either be specified in a `_config.yml` or `_config.toml` file placed in your site’s root directory, or can be specified as flags for the `jekyll` executable in the terminal.

- [Configuration Options](https://jekyllrb.com/docs/configuration/options/)
- [Default Configuration](https://jekyllrb.com/docs/configuration/default/)
- [Front Matter Defaults](https://jekyllrb.com/docs/configuration/front-matter-defaults/)
- [Environments](https://jekyllrb.com/docs/configuration/environments/)
- [Markdown Options](https://jekyllrb.com/docs/configuration/markdown/)
- [Liquid Options](https://jekyllrb.com/docs/configuration/liquid/)
- [Webrick Options](https://jekyllrb.com/docs/configuration/webrick/)
- [Incremental Regeneration](https://jekyllrb.com/docs/configuration/incremental-regeneration/)



# Configuration Options

The tables below list the available settings for Jekyll, and the various `options` (specified in the configuration file) and `flags` (specified on the command-line) that control them.

### Global Configuration[Permalink](https://jekyllrb.com/docs/configuration/options/#global-configuration)

| SETTING                                                      | OPTIONS AND FLAGS                                            |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| **Site Source**Change the directory where Jekyll will read files | `source: DIR``-s, --source DIR`                              |
| **Site Destination**Change the directory where Jekyll will write files | `destination: DIR``-d, --destination DIR`                    |
| **Safe**Disable [non-whitelisted plugins](https://jekyllrb.com/docs/plugins/), caching to disk, and ignore symbolic links. | `safe: BOOL``--safe`                                         |
| **Disable Disk Cache** 4.1.0Disable caching of content to disk in order to skip creating a `.jekyll-cache` or similar directory at the source to avoid interference with virtual environments and third-party directory watchers. Caching to disk is always disabled in `safe` mode. | `disable_disk_cache: BOOL``--disable-disk-cache`             |
| **Ignore theme configuration** 4.1.0Jekyll 4.0 started allowing themes to bundle a `_config.yml` to simplify theme-onboarding for new users. In the unfortunate situation that importing a bundled theme configuration messes up the merged site-configuration, the user can configure Jekyll to not import the theme-config entirely. | `ignore_theme_config: BOOL`                                  |
| **Exclude**Exclude directories and/or files from the conversion. These exclusions are relative to the site's source directory and cannot be outside the source directory. | `exclude: [DIR, FILE, ...]`                                  |
| **Include**Force inclusion of directories and/or files in the conversion. `.htaccess` is a good example since dotfiles are excluded by default. | `include: [DIR, FILE, ...]`                                  |
| **Keep files**When clobbering the site destination, keep the selected files. Useful for files that are not generated by jekyll; e.g. files or assets that are generated by your build tool. The paths are relative to the `destination`. | `keep_files: [DIR, FILE, ...]`                               |
| **Time Zone**Set the time zone for site generation. This sets the `TZ` environment variable, which Ruby uses to handle time and date creation and manipulation. Any entry from the [IANA Time Zone Database](https://en.wikipedia.org/wiki/Tz_database) is valid, e.g. `America/New_York`. A list of all available values can be found [here](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones). When serving on a local machine, the default time zone is set by your operating system. But when served on a remote host/server, the default time zone depends on the server's setting or location. | `timezone: TIMEZONE`                                         |
| **Encoding**Set the encoding of files by name (only available for Ruby 1.9 or later). The default value is `utf-8` starting in 2.0.0, and `nil` before 2.0.0, which will yield the Ruby default of `ASCII-8BIT`. Available encodings can be shown by the command `ruby -e 'puts Encoding::list.join("\n")'`. | `encoding: ENCODING`                                         |
| **Defaults**Set defaults for [front matter](https://jekyllrb.com/docs/front-matter/) variables. | see [below](https://jekyllrb.com/docs/configuration/front-matter-defaults/) |

##### Destination folders are cleaned on site builds

The contents of `<destination>` are automatically cleaned, by default, when the site is built. Files or folders that are not created by your site will be removed. Some files could be retained by specifying them within the `<keep_files>` configuration directive.

Do not use an important location for `<destination>`; instead, use it as a staging area and copy files from there to your web server.

### Build Command Options[Permalink](https://jekyllrb.com/docs/configuration/options/#build-command-options)

| SETTING                                                      | OPTIONS AND FLAGS                                          |
| ------------------------------------------------------------ | ---------------------------------------------------------- |
| **Regeneration**Enable auto-regeneration of the site when files are modified. | `-w, --[no-]watch`                                         |
| **Configuration**Specify config files instead of using `_config.yml` automatically. Settings in later files override settings in earlier files. | `--config FILE1[,FILE2,...]`                               |
| **Plugins**Specify plugin directories instead of using `_plugins/` automatically. | `plugins_dir: [ DIR1,... ]``-p, --plugins DIR1[,DIR2,...]` |
| **Layouts**Specify layout directory instead of using `_layouts/` automatically. | `layout_dir: DIR``--layouts DIR`                           |
| **Drafts**Process and render draft posts.                    | `show_drafts: BOOL``-D, --drafts`                          |
| **Environment**Use a specific environment value in the build. | `JEKYLL_ENV=production`                                    |
| **Future**Publish posts or collection documents with a future date. | `future: BOOL``--future`                                   |
| **Unpublished**Render posts that were marked as unpublished. | `unpublished: BOOL``--unpublished`                         |
| **LSI**Produce an index for related posts. Requires the [classifier-reborn](https://jekyll.github.io/classifier-reborn/) plugin. | `lsi: BOOL``--lsi`                                         |
| **Limit Posts**Limit the number of posts to parse and publish. | `limit_posts: NUM``--limit_posts NUM`                      |
| **Force polling**Force watch to use polling.                 | `force_polling: BOOL``--force_polling`                     |
| **Verbose output**Print verbose output.                      | `-V, --verbose`                                            |
| **Silence Output**Silence the normal output from Jekyll during a build. | `-q, --quiet`                                              |
| **Incremental build**Enable the experimental incremental build feature. Incremental build only re-builds posts and pages that have changed, resulting in significant performance improvements for large sites, but may also break site generation in certain cases. | `incremental: BOOL``-I, --incremental`                     |
| **Liquid profiler**Generate a Liquid rendering profile to help you identify performance bottlenecks. | `profile: BOOL``--profile`                                 |
| **Strict Front Matter**Cause a build to fail if there is a YAML syntax error in a page's front matter. | `strict_front_matter: BOOL``--strict_front_matter`         |
| **Base URL**Serve the website from the given base URL.       | `baseurl: URL``-b, --baseurl URL`                          |
| **Trace**Show the full backtrace when an error occurs.       | `-t, --trace`                                              |

### Serve Command Options[Permalink](https://jekyllrb.com/docs/configuration/options/#serve-command-options)

In addition to the options below, the `serve` sub-command can accept any of the options for the `build` sub-command, which are then applied to the site build which occurs right before your site is served.

| SETTING                                                      | OPTIONS AND FLAGS                                            |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| **Local Server Port**Listen on the given port.               | `port: PORT``-P, --port PORT`                                |
| **Local Server Hostname**Listen at the given hostname.       | `host: HOSTNAME``-H, --host HOSTNAME`                        |
| **Live Reload**Reload a page automatically on the browser when its content is edited. | `livereload: BOOL``-l, --livereload`                         |
| **Live Reload Ignore**File glob patterns for LiveReload to ignore. | `livereload_ignore: [ GLOB1,... ]``--livereload-ignore GLOB1[,GLOB2,...]` |
| **Live Reload Min/Max Delay**Minimum/Maximum delay before automatically reloading page. | `livereload_min_delay: SECONDS` `livereload_max_delay: SECONDS` `--livereload-min-delay SECONDS` `--livereload-max-delay SECONDS` |
| **Live Reload Port**Port for LiveReload to listen on.        | `--livereload-port PORT`                                     |
| **Open URL**Open the site's URL in the browser.              | `open_url: BOOL``-o, --open-url`                             |
| **Detach**Detach the server from the terminal.               | `detach: BOOL``-B, --detach`                                 |
| **Skips the initial site build**Skips the initial site build which occurs before the server is started. | `skip_initial_build: BOOL``--skip-initial-build`             |
| **Show Directory Listing**Show a directory listing instead of loading your index file. | `show_dir_listing: BOOL``--show-dir-listing`                 |
| **X.509 (SSL) Private Key**SSL Private Key, stored or symlinked in the site source. | `--ssl-key`                                                  |
| **X.509 (SSL) Certificate**SSL Public certificate, stored or symlinked in the site source. | `--ssl-cert`                                                 |

##### Do not use tabs in configuration files

This will either lead to parsing errors, or Jekyll will revert to the default settings. Use spaces instead.





# Default Configuration

Jekyll runs with the following configuration options by default. Alternative settings for these options can be explicitly specified in the configuration file or on the command-line.

##### Be aware of directory paths

Make directory path values in configuration keys like `plugins_dir` relative to the current working directory, not the site source.

```
# Where things are
source              : .
destination         : ./_site
collections_dir     : .
plugins_dir         : _plugins # takes an array of strings and loads plugins in that order
layouts_dir         : _layouts
data_dir            : _data
includes_dir        : _includes
sass:
  sass_dir: _sass
collections:
  posts:
    output          : true

# Handling Reading
safe                : false
include             : [".htaccess"]
exclude             : ["Gemfile", "Gemfile.lock", "node_modules", "vendor/bundle/", "vendor/cache/", "vendor/gems/", "vendor/ruby/"]
keep_files          : [".git", ".svn"]
encoding            : "utf-8"
markdown_ext        : "markdown,mkdown,mkdn,mkd,md"
strict_front_matter : false

# Filtering Content
show_drafts         : null
limit_posts         : 0
future              : false
unpublished         : false

# Plugins
whitelist           : []
plugins             : []

# Conversion
markdown            : kramdown
highlighter         : rouge
lsi                 : false
excerpt_separator   : "\n\n"
incremental         : false

# Serving
detach              : false
port                : 4000
host                : 127.0.0.1
baseurl             : "" # does not include hostname
show_dir_listing    : false

# Outputting
permalink           : date
paginate_path       : /page:num
timezone            : null

quiet               : false
verbose             : false
defaults            : []

liquid:
  error_mode        : warn
  strict_filters    : false
  strict_variables  : false

# Markdown Processors
kramdown:
  auto_ids          : true
  entity_output     : as_char
  toc_levels        : [1, 2, 3, 4, 5, 6]
  smart_quotes      : lsquo,rsquo,ldquo,rdquo
  input             : GFM
  hard_wrap         : false
  footnote_nr       : 1
  show_warnings     : false
```







# Front Matter Defaults

Using [front matter](https://jekyllrb.com/docs/front-matter/) is one way that you can specify configuration in the pages and posts for your site. Setting things like a default layout, or customizing the title, or specifying a more precise date/time for the post can all be added to your page or post front matter.

Often times, you will find that you are repeating a lot of configuration options. Setting the same layout in each file, adding the same category - or categories - to a post, etc. You can even add custom variables like author names, which might be the same for the majority of posts on your blog.

Instead of repeating this configuration each time you create a new post or page, Jekyll provides a way to set these defaults in the site configuration. To do this, you can specify site-wide defaults using the `defaults` key in the `_config.yml` file in your project’s root directory.

The `defaults` key holds an array of scope/values pairs that define what defaults should be set for a particular file path, and optionally, a file type in that path.

Let’s say that you want to add a default layout to all pages and posts in your site. You would add this to your `_config.yml` file:

```
defaults:
  -
    scope:
      path: "" # an empty string here means all files in the project
    values:
      layout: "default"
```

##### Stop and rerun `jekyll serve` command.

The `_config.yml` master configuration file contains global configurations and variable definitions that are read once at execution time. Changes made to `_config.yml` during automatic regeneration are not loaded until the next execution.

Note [Data Files](https://jekyllrb.com/docs/datafiles) are included and reloaded during automatic regeneration.

Here, we are scoping the `values` to any file that exists in the path `scope`. Since the path is set as an empty string, it will apply to **all files** in your project. You probably don’t want to set a layout on every file in your project - like css files, for example - so you can also specify a `type` value under the `scope` key.

```
defaults:
  -
    scope:
      path: "" # an empty string here means all files in the project
      type: "posts" # previously `post` in Jekyll 2.2.
    values:
      layout: "default"
```

Now, this will only set the layout for files where the type is `posts`. The different types that are available to you are `pages`, `posts`, `drafts` or any collection in your site. While `type` is optional, you must specify a value for `path` when creating a `scope/values` pair.

As mentioned earlier, you can set multiple scope/values pairs for `defaults`.

```
defaults:
  -
    scope:
      path: ""
      type: "pages"
    values:
      layout: "my-site"
  -
    scope:
      path: "projects"
      type: "pages" # previously `page` in Jekyll 2.2.
    values:
      layout: "project" # overrides previous default layout
      author: "Mr. Hyde"
```

With these defaults, all pages would use the `my-site` layout. Any html files that exist in the `projects/` folder will use the `project` layout, if it exists. Those files will also have the `page.author` [liquid variable](https://jekyllrb.com/docs/variables/) set to `Mr. Hyde`.

```
collections:
  my_collection:
    output: true

defaults:
  -
    scope:
      path: ""
      type: "my_collection" # a collection in your site, in plural form
    values:
      layout: "default"
```

In this example, the `layout` is set to `default` inside the [collection](https://jekyllrb.com/docs/collections/) with the name `my_collection`.

### Glob patterns in Front Matter defaults[Permalink](https://jekyllrb.com/docs/configuration/front-matter-defaults/#glob-patterns-in-front-matter-defaults)

It is also possible to use glob patterns (currently limited to patterns that contain `*`) when matching defaults. For example, it is possible to set specific layout for each `special-page.html` in any subfolder of `section` folder.3.7.0

```
collections:
  my_collection:
    output: true

defaults:
  -
    scope:
      path: "section/*/special-page.html"
    values:
      layout: "specific-layout"
```

##### Globbing and Performance

Please note that globbing a path is known to have a negative effect on performance and is currently not optimized, especially on Windows. Globbing a path will increase your build times in proportion to the size of the associated collection directory.

### Precedence[Permalink](https://jekyllrb.com/docs/configuration/front-matter-defaults/#precedence)

Jekyll will apply all of the configuration settings you specify in the `defaults` section of your `_config.yml` file. You can choose to override settings from other scope/values pair by specifying a more specific path for the scope.

You can see that in the second to last example above. First, we set the default page layout to `my-site`. Then, using a more specific path, we set the default layout for pages in the `projects/` path to `project`. This can be done with any value that you would set in the page or post front matter.

Finally, if you set defaults in the site configuration by adding a `defaults` section to your `_config.yml` file, you can override those settings in a post or page file. All you need to do is specify the settings in the post or page front matter. For example:

```
# In _config.yml
...
defaults:
  -
    scope:
      path: "projects"
      type: "pages"
    values:
      layout: "project"
      author: "Mr. Hyde"
      category: "project"
...
# In projects/foo_project.md
---
author: "John Smith"
layout: "foobar"
---
The post text goes here...
```

The `projects/foo_project.md` would have the `layout` set to `foobar` instead of `project` and the `author` set to `John Smith` instead of `Mr. Hyde` when the site is built.





# Environments

In the `build` (or `serve`) arguments, you can specify a Jekyll environment and value. The build will then apply this value in any conditional statements in your content.

For example, suppose you set this conditional statement in your code:

```
{ % if jekyll.environment == "production" % }
   { % include disqus.html % }
{ % endif % }
```

When you build your Jekyll site, the content inside the `if` statement won’t be run unless you also specify a `production` environment in the build command, like this:

```
JEKYLL_ENV=production jekyll build
```

Specifying an environment value allows you to make certain content available only within specific environments.

The default value for `JEKYLL_ENV` is `development`. Therefore if you omit `JEKYLL_ENV` from the build arguments, the default value will be `JEKYLL_ENV=development`. Any content inside `{ % if jekyll.environment == "development" % }` tags will automatically appear in the build.

Your environment values can be anything you want (not just `development` or `production`). Some elements you might want to hide in development environments include Disqus comment forms or Google Analytics. Conversely, you might want to expose an “Edit me in GitHub” button in a development environment but not include it in production environments.

By specifying the option in the build command, you avoid having to change values in your configuration files when moving from one environment to another.

To switch part of your config settings depending on the environment, use the [build command option](https://jekyllrb.com/docs/configuration/options/#build-command-options), for example `--config _config.yml,_config_development.yml`. Settings in later files override settings in earlier files.







# Markdown Options

The various Markdown renderers supported by Jekyll sometimes have extra options available.

### Kramdown[Permalink](https://jekyllrb.com/docs/configuration/markdown/#kramdown)

Kramdown is the default Markdown renderer for Jekyll. Below is a list of the currently supported options:

- **auto_id_prefix** - Prefix used for automatically generated header IDs
- **auto_id_stripping** - Strip all formatting from header text for automatic ID generation
- **auto_ids** - Use automatic header ID generation
- **coderay_bold_every** - Defines how often a line number should be made bold
- **coderay_css** - Defines how the highlighted code gets styled
- **coderay_default_lang** - Sets the default language for highlighting code blocks
- **coderay_line_number_start** - The start value for the line numbers
- **coderay_line_numbers** - Defines how and if line numbers should be shown
- **coderay_tab_width** - The tab width used in highlighted code
- **coderay_wrap** - Defines how the highlighted code should be wrapped
- **enable_coderay** - Use coderay for syntax highlighting
- **entity_output** - Defines how entities are output
- **footnote_backlink** - Defines the text that should be used for the footnote backlinks
- **footnote_backlink_inline** - Specifies whether the footnote backlink should always be inline
- **footnote_nr** - The number of the first footnote
- **gfm_quirks** - Enables a set of GFM specific quirks
- **hard_wrap** - Interprets line breaks literally
- **header_offset** - Sets the output offset for headers
- **html_to_native** - Convert HTML elements to native elements
- **line_width** - Defines the line width to be used when outputting a document
- **link_defs** - Pre-defines link definitions
- **math_engine** - Set the math engine
- **math_engine_opts** - Set the math engine options
- **parse_block_html** - Process kramdown syntax in block HTML tags
- **parse_span_html** - Process kramdown syntax in span HTML tags
- **smart_quotes** - Defines the HTML entity names or code points for smart quote output
- **syntax_highlighter** - Set the syntax highlighter
- **syntax_highlighter_opts** - Set the syntax highlighter options
- **toc_levels** - Defines the levels that are used for the table of contents
- **transliterated_header_ids** - Transliterate the header text before generating the ID
- **typographic_symbols** - Defines a mapping from typographical symbol to output characters

### Example Usage[Permalink](https://jekyllrb.com/docs/configuration/markdown/#example-usage)

```
kramdown:
  html_to_native: true
```

##### There are two unsupported kramdown options

Please note that both `remove_block_html_tags` and `remove_span_html_tags` are currently unsupported in Jekyll due to the fact that they are not included within the kramdown HTML converter.

For more details about these options have a look at the [Kramdown configuration documentation](https://kramdown.gettalong.org/options.html).

### CommonMark[Permalink](https://jekyllrb.com/docs/configuration/markdown/#commonmark)

[CommonMark](https://commonmark.org/) is a rationalized version of Markdown syntax, implemented in C and thus faster than default Kramdown implemented in Ruby. It [slightly differs](https://github.com/commonmark/CommonMark#differences-from-original-markdown) from original Markdown and does not support all the syntax elements implemented in Kramdown, like [Block Inline Attribute Lists](https://kramdown.gettalong.org/syntax.html#block-ials).

It comes in two flavors: basic CommonMark with [jekyll-commonmark](https://github.com/jekyll/jekyll-commonmark) plugin and [GitHub Flavored Markdown supported by GitHub Pages](https://github.com/github/jekyll-commonmark-ghpages).

### Custom Markdown Processors[Permalink](https://jekyllrb.com/docs/configuration/markdown/#custom-markdown-processors)

If you’re interested in creating a custom markdown processor, you’re in luck! Create a new class in the `Jekyll::Converters::Markdown` namespace:

```
class Jekyll::Converters::Markdown::MyCustomProcessor
  def initialize(config)
    require 'funky_markdown'
    @config = config
  rescue LoadError
    STDERR.puts 'You are missing a library required for Markdown. Please run:'
    STDERR.puts '  $ [sudo] gem install funky_markdown'
    raise FatalException.new("Missing dependency: funky_markdown")
  end

  def convert(content)
    ::FunkyMarkdown.new(content).convert
  end
end
```

Once you’ve created your class and have it properly set up either as a plugin in the `_plugins` folder or as a gem, specify it in your `_config.yml`:

```
markdown: MyCustomProcessor
```





# Liquid Options

Liquid’s response to errors can be configured by setting `error_mode`. The options are

- `lax` — Ignore all errors.
- `warn` — Output a warning on the console for each error. (default)
- `strict` — Output an error message and stop the build.

Within _config.yml, the default configuration is as follows:

```
liquid:
  error_mode: warn
```

The above example depicts the “warn” value, which is already set by default- `error_mode: warn`. This results in any issues being called out during the build process however will continue to build if possible.

You can also configure Liquid’s renderer to catch non-assigned variables and non-existing filters by setting `strict_variables` and / or `strict_filters` to `true` respectively. 3.8.0

Do note that while `error_mode` configures Liquid’s parser, the `strict_variables` and `strict_filters` options configure Liquid’s renderer and are consequently, mutually exclusive.

An example of setting these variables within _config.yml is as follows:

```
liquid:
  error_mode: strict
  strict_variables: true
  strict_filters: true
```

Configuring as described above will stop your build/serve from happening and call out the offending error and halt. This is helpful when desiring to catch liquid-related issues by stopping the build or serve process and allowing you to deal with any issues.





# WEBrick Options

You can provide custom headers for your site by adding them to `_config.yml`

```
# File: _config.yml
webrick:
  headers:
    My-Header: My-Value
    My-Other-Header: My-Other-Value
```

### Defaults[Permalink](https://jekyllrb.com/docs/configuration/webrick/#defaults)

Jekyll provides by default `Content-Type` and `Cache-Control` response headers: one dynamic in order to specify the nature of the data being served, the other static in order to disable caching so that you don’t have to fight with Chrome’s aggressive caching when you are in development mode.







# Default Configuration

## Incremental Regeneration[Permalink](https://jekyllrb.com/docs/configuration/incremental-regeneration/#incremental-regeneration)

##### Incremental regeneration is still an experimental feature

While incremental regeneration will work for the most common cases, it will not work correctly in every scenario. Please be extremely cautious when using the feature, and report any problems not listed below by [opening an issue on GitHub](https://github.com/jekyll/jekyll/issues/new).

Incremental regeneration helps shorten build times by only generating documents and pages that were updated since the previous build. It does this by keeping track of both file modification times and inter-document dependencies in the `.jekyll-metadata` file.

Under the current implementation, incremental regeneration will only generate a document or page if either it, or one of its dependencies, is modified. Currently, the only types of dependencies tracked are includes (using the `{% include %}` tag) and layouts. This means that plain references to other documents (for example, the common case of iterating over `site.posts` in a post listings page) will not be detected as a dependency.

To remedy some of these shortfalls, putting `regenerate: true` in the front-matter of a document will force Jekyll to regenerate it regardless of whether it has been modified. Note that this will generate the specified document only; references to other documents’ contents will not work since they won’t be re-rendered.

Incremental regeneration can be enabled via the `--incremental` flag (`-I` for short) from the command-line or by setting `incremental: true` in your configuration file.
